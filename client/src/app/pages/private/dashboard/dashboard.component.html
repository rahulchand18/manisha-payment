<div class="container">

</div>


<div class="container p-3" *ngIf="notifications && notifications.length">
  <h2>Notifications</h2>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>S.No.</th>
        <th>Message</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let notification of notifications; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ notification.message }}</td>
        <td>
          {{ notification.sentDate | date : "hh:mm a dd MMMM, yyyy" }}
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="!notifications || !notifications.length">
    <div class="alert alert-danger">No Notifications</div>
  </div>
</div>


<div class=" p-3">
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th *ngFor="let month of monthArray">{{month}}</th>
        <!-- <th>Action</th> -->
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of allUsers; let i = index">
        <td>
          <img
            [src]="user.profile ? authService.getProfileUrl(user.profile) : '../../../../../../assets/images/image.png'"
            alt="" height="50px" width="50px" style="border-radius: 50%; border: 1px solid purple" />

          <strong> {{ user.fullName }}</strong>
        </td>
        <td *ngFor="let month of monthArray">
          <span *ngIf="currentUser.userType!=='admin'">

            <span> Rs.{{ user[month]??'-' }}</span>
          </span>
          <div *ngIf="currentUser.userType==='admin'" class="d-flex content ">

            <mat-form-field appearance="outline" [style.width]="'100px'">
              <input type="number" matInput [(ngModel)]="user[month]" [name]="'amount' + i + month" />
            </mat-form-field>
            <button [style.width]="'50px'" mat-flat-button color="primary"
              (click)="updateBalance(user[month], user.email, month, 'added')">
              Save
            </button>
          </div>
        </td>
        <!-- <td>
          <button [disabled]="!user.amount" mat-button color="primary"
            (click)="updateBalance(user.amount, user.email, 'deducted')">
            -
          </button>
          <mat-form-field appearance="outline">
            <input type="number" matInput [(ngModel)]="user.amount" [name]="'amount' + i" />
          </mat-form-field>
          <button [disabled]="!user.amount" mat-button color="primary"
            (click)="updateBalance(user.amount, user.email, 'added')">
            +
          </button>
        </td> -->
      </tr>
    </tbody>
  </table>
</div>

@if(statements && statements.length){

<div class="container">
  <h4>Statements</h4>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>SN.</th>
        <th>Remarks</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let statement of statements; let i = index">
        <td>{{ i + 1 }}</td>
        <td>
          <span [ngClass]="{
                'text-danger': statement.action === 'deducted',
                'text-success': statement.action === 'added'
              }">
            Rs.{{ statement.balance }} {{ statement.action }} for the month {{statement.month}}</span>
          Remarks: {{ statement.remarks }}
        </td>
        <td>{{ statement.date | date : "hh:mm a dd MMMM, yyyy" }}</td>
      </tr>
    </tbody>
  </table>
</div>
}